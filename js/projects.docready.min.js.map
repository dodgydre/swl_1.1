{"version":3,"sources":["projects.docready.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"projects.docready.min.js","sourcesContent":["(function($) {\n\n    //\"use strict\";\n\n    // Global Variables\n    var ww = $(window).width(),\n        wh = $(window).height(),\n        headerheight = 105,\n        footerheight = 45,\n        iah = wh - headerheight - footerheight,\n        siteratio = ww / iah,\n        minww = 0,\n        minwh = 0,\n        gutter = 0,\n        easing = \"jswing\",\n        speed = 400,\n        fadeOutSpeed = 300,\n        fadeInSpeed = 700,\n        currenturl = window.location.pathname;\n\n    $(document).ready(function() {\n\n\n        /* -------  If smaller screen add mobile class to main div --------- */\n        if ($(window).width() > 769) {\n            $('body').addClass('large').removeClass('mobile');\n            $('#proj_img').addClass('large').removeClass('mobile');\n            $('#proj_img_container').addClass('large').removeClass('mobile');\n            $('#proj_img img').addClass('slide');\n        } else {\n            headerheight = 45;\n            iah = wh-footerheight-headerheight;\n            $('body').removeClass('large').addClass('mobile');\n            $('#proj_img').removeClass('large').addClass('mobile');\n            $('#proj_img_container').removeClass('large').addClass('mobile');\n            $('#proj_img_container').height(iah);\n            $('#proj_img img').removeClass('slide');\n            $('.single-footer__more').text(' / More');\n            $('.arrw').hide();\n        }\n\n        resizeSite();\n\n        /* -------  Button for footer expand --------- */\n        if(/*$('body').hasClass('large')*/1) {\n            $('.single-expand').click(function(e) {\n                e.preventDefault();\n                /* IF the footer is already expanded then lower it */\n                if ($('.single-footer__container').hasClass('expanded')) {\n                    $('.single-footer__container').stop().animate({\n                        height: footerheight\n                    }, {\n                        duration: 20,\n                        easing: 'jswing'\n                    });\n                    $('.single-below-footer__container').stop().animate({\n                        marginTop: 0\n                    }, {\n                        duration: 20,\n                        easing: 'jswing'\n                    });\n                    $('.single-footer__container').removeClass('expanded');\n                    if($('body').hasClass('large')) {\n                        $('.single-footer__more').text(' / Read More');\n                    } else {\n                        $('.single-footer__more').text(' / More');\n                    }\n                } else {\n                    adjustFooterHeight();\n                    $('.single-footer__container').addClass('expanded');\n                    if($('body').hasClass('large')) {\n                        $('.single-footer__more').text(' / Hide Text');\n                    } else {\n                        $('.single-footer__more').text(' / Hide');\n                    }\n                }\n            });\n        }\n\n\n        /* -------  Change Browser Address Bar on Change Project --------- */\n        // TODO: Check\n        var History = window.History;\n        if (History.enabled) {\n            History.Adapter.bind(window, 'statechange', function() {\n                var State = History.getState();\n                var url = document.createElement('a');\n                url.href = State.url;\n                getPage(url.pathname, false);\n            });\n            var hash = window.location.hash;\n            if (hash) {\n                History.Adapter.trigger(window, 'statechange');\n            }\n        }\n\n\n        // Hide Images and Fade in the first one\n        if (!$.browser.msie) {\n            if($('body').hasClass('large')) {\n                if ($(\"#proj_img\").length > 0) {\n                    $(\"#proj_img img\").hide();\n                    $('#proj_img .active img').first().fadeIn(400);\n                }\n            } else {\n                if ($(\"#proj_img\").length > 0) {\n                    var caption = $('#proj_img .active img').first().nextAll('.single-project-caption').html();\n                    var description = $('#proj_img .active img').first().nextAll('.single-project-description').html();\n                    var imagedate = $('#proj_img .active img').first().nextAll('.single-project-date').html();\n\n                    $('.single-footer__caption').html(caption);\n                    $('.single-footer__caption-date').html(imagedate);\n                    $('.single-below-footer__description').html(description);\n                }\n            }\n        }\n\n        /* -------  On resizing, check the screen size again --------- */\n        $(window).resize(function() {\n            if ($(window).width() > 769) {\n                if ($('.mobile').length > 0) {\n                    headerheight = 105;\n                    iah = $(window).height() - headerheight - footerheight;\n                    $('body').addClass('large').removeClass('mobile');\n                    $('#proj_img').addClass('large').removeClass('mobile');\n                    $('#proj_img_container').addClass('large').removeClass('mobile');\n\n                    // When switching back to large size, first hide all images,\n                    // then only show the current active project image\n                    $('#proj_img img').hide();\n                    $('#proj_img .active img').first().fadeIn(400);\n\n                    // reset the footer variables for the active project\n                    var caption = $('#proj_img .active img').first().nextAll('.single-project-caption').first().html();\n                    var description = $('#proj_img .active img').first().nextAll('.single-project-description').first().html();\n                    var imagedate = $('#proj_img .active img').first().nextAll('.single-project-date').first().html();\n\n                    $('.single-footer__caption').html(caption);\n                    $('.single-footer__caption-date').html(imagedate);\n                    $('.single-below-footer__description').html(description);\n\n                    // Bring back the arrows if we go big again.\n                    $('.arrw').show();\n                }\n            } else {\n                headerheight = 45;\n                iah = $(window).height() - headerheight - footerheight;\n\n                $('body').removeClass('large').addClass('mobile');\n                $('#proj_img').removeClass('large').addClass('mobile');\n                $('#proj_img_container').removeClass('large').addClass('mobile');\n                $('#proj_img_container').height(iah);\n                // take away the arrows when we go small.\n                $('.arrw').hide();\n            }\n            resizeSite();\n        });\n\n        // Project Table Sorting?\n\n        // Project Slider (1)\n        $(\"#proj_img.project .arrw\").click(function() {\n\n            console.log('arrow clicked');\n\n            var dir, thislink;\n            var thisSlideShow, slideToShow, thisProject, current;\n            var imgDim, currentLeft, nextCurrentLeft, nextNextLeft, caption, imagedate, description;\n\n            ww = $(window).width();\n            wh = $(window).height();\n\n            cw = ww;\n            ch = wh - footerheight - headerheight;\n\n            thislink = $(this);\n\n            if ($(this).hasClass(\"left\")) {\n                dir = \"l\";\n            } else if ($(this).hasClass(\"right\")) {\n                dir = \"r\";\n            } else if ($(this).hasClass(\"up\")) {\n                dir = \"u\";\n            } else if ($(this).hasClass(\"down\")) {\n                dir = \"d\";\n            }\n\n            resizeSite();\n\n\n            var thisSlideShow = $(\"#proj_img\");\n            var thisProject = $(\".proj.active\");\n            var current = $(\".proj.active .slide:visible\");\n            var imgDim, slideToShow, currentLeft, nextCurrentLeft, nextNextLeft;\n            var captionText;\n\n            /*  ----- CLICK LEFT (Prev Slide) -------*/\n            if (dir == \"l\") {\n                if (thisProject.find(\".slide\").length > 1) {\n                    // if the current slide is not the first then move one to the left.\n                    if (current.prevAll(\".proj.active .slide\").first().length > 0) {\n                        slideToShow = current.prevAll(\".proj.active .slide\").first();\n                    }\n                    // if the current slide IS the first one then slide to the last slide\n                    else {\n                        slideToShow = $(\".proj.active .slide\").eq($(\".proj.active .slide\").length - 1);\n                    }\n\n                    /* If the footer is epanded, shrink it */\n                    if ($('.single-footer__container').hasClass('expanded')) {\n                        $('.single-expand').click();\n                    }\n\n                    if (thisSlideShow.hasClass(\"fading\")) {\n                        current.fadeOut(fadeOutSpeed);\n                        slideToShow.fadeIn(fadeInSpeed);\n                    } else if (thisSlideShow.hasClass(\"sliding\")) {\n                        imgDim = imgResize(slideToShow, cw, ch, \"array\", 0, 0, 0, 0);\n                        currentLeft = current.offset().left;\n                        nextCurrentLeft = currentLeft + cw + gutter;\n                        nextNextLeft = (imgDim[2] - cw - gutter);\n\n                        current.stop().animate({\n                            left: nextCurrentLeft\n                        }, {\n                            duration: speed,\n                            easing: easing\n                        }).hide(0).css(\"left\", currentLeft + \"px\");\n                        slideToShow.css(\"left\", nextNextLeft + \"px\").show(0).stop().animate({\n                            left: imgDim[2]\n                        }, {\n                            duration: speed,\n                            easing: easing\n                        });\n                    }\n                    captionText = slideToShow.next(\"span\").html();\n                    $(\"footer .imgcap\").html(captionText);\n                    if (slideToShow.hasClass(\"video\")) {\n                        $(\".arrw.left, .arrw.right\").height(ch / 2);\n                        $(\".arrw.down\").hide();\n                    } else {\n                        $(\"arrw.left, .arrw.right\").height(ch - 120);\n                        $(\"arrw.down\").show();\n                    }\n                    // If we want the image numebr...\n                    // TODO: Add the diagram to the bottom right showing image boxes and update\n                    //$(\"#footer .ic\").text(slideToShow.index(\".proj.active .slide\")+1);\n                }\n            }\n\n            /*  ----- CLICK RIGHT (Next Slide) -------*/\n            else if (dir == \"r\") {\n                console.log('direction = right');\n                if (thisProject.find(\".slide\").length > 1) {\n                    if (current.nextAll(\".proj.active .slide\").first().length > 0) {\n                        // If we're not on the last slide, move one forward\n                        slideToShow = current.nextAll(\".proj.active .slide\").first();\n                    } else {\n                        // if we are on the last slide move back to the start\n                        slideToShow = $(\".proj.active .slide:first-child\");\n                    }\n\n                    /* If the footer is expanded, shrink it */\n                    if ($('.single-footer__container').hasClass('expanded')) {\n                        $('.single-expand').click();\n                    }\n\n                    if (thisSlideShow.hasClass(\"fading\")) {\n                        current.fadeOut(fadeOutSpeed);\n                        slideToShow.fadeIn(fadeInSpeed);\n                    } else if (thisSlideShow.hasClass(\"sliding\")) {\n                        console.log(slideToShow);\n                        console.log(\"cw, ch: \" + cw + ', ' + ch);\n\n                        imgDim = imgResize(slideToShow, cw, ch, \"array\", 0, 0, 0, 0);\n                        currentLeft = current.offset().left;\n                        nextCurrentLeft = -(ww + gutter);\n                        nextNextLeft = (imgDim[2] + ww + gutter);\n                        current.stop().animate({\n                            left: nextCurrentLeft\n                        }, {\n                            duration: speed,\n                            easing: easing\n                        }).hide(0).css(\"left\", currentLeft + \"px\");\n                        slideToShow.css(\"left\", nextNextLeft + \"px\").show(0).stop().animate({\n                            left: imgDim[2]\n                        }, {\n                            duration: speed,\n                            easing: easing\n                        });\n                    }\n\n                    captionText = slideToShow.next(\"span\").html();\n                    $(\"#footer .imgcap\").html(captionText);\n                    if (slideToShow.hasClass(\"video\")) {\n                        $(\".arrw.left, .arrw.right\").height(ch / 2);\n                        $(\".arrw.down\").hide();\n                    } else {\n                        $(\".arrw.left, .arrw.right\").height(ch - 120);\n                        $(\".arrw.down\").show();\n                    }\n                }\n            }\n            /*  ----- CLICK UP OR DOWN (Next / Prev PROJECT) -------*/\n            else if (dir == \"u\" || dir == \"d\") {\n                var href = thislink.attr(\"href\");\n                History.pushState(null, null, href);\n            }\n            return false;\n        }); // close >> #proj_img.project .arrw click\n\n        // Use Keyboard instead of Mouse\n        $(document).keydown(function(e) {\n            if (e.which == 37 && !e.metaKey) {\n                e.preventDefault();\n                $(\".arrw.left\").click();\n            } else if (e.which == 38 && !e.metaKey) {\n                e.preventDefault();\n                $(\".arrw.up\").click();\n            } else if (e.which == 39 && !e.metaKey) {\n                e.preventDefault();\n                $(\".arrw.right\").click();\n            } else if (e.which == 40 && !e.metaKey) {\n                e.preventDefault();\n                $(\".arrw.down\").click();\n            }\n        });\n\n        // NOTE: jQuery.touchSwipe.min.js\n        if($('body').hasClass('large')) {\n            $(\".arrw\").swipe({\n                //Generic swipe handler for all directions\n                swipe: function(event, direction, distance, duration, fingerCount, fingerData) {\n                    console.log(\"You swiped \" + direction);\n                    if (direction == \"left\") {\n                        $('.arrw.right').click();\n                    }\n                    if (direction == \"right\") {\n                        $('.arrw.left').click();\n                    }\n                    if (direction == \"down\") {\n                        $('.arrw.up').click();\n                    }\n                    if (direction == \"up\") {\n                        $('.arrw.down').click();\n                    }\n                }\n            });\n        } else /* body doesn't have class large */ {\n            $('.proj').on(\"swiperight\",function(e) {\n                console.log('swiped right');\n                e.preventDefault();\n                var href = $('.arrw.up').attr('href');\n                History.pushState(null, null, href);\n            }).on(\"swipeleft\", function(e) {\n                console.log('swiped left');\n\n                e.preventDefault();\n                var href = $('.arrw.down').attr('href');\n                History.pushState(null, null, href);\n            });\n        }\n\n        getPrevAndNextButtons($(\".proj.active\"));\n        loadPrevAndNextProject($(\".proj.active\"));\n\n    }); // close >> document(ready)\n\n    /*$(window).load(function() {\n        getPrevAndNextButtons($(\".proj.active\"));\n        loadPrevAndNextProject($(\".proj.active\"));\n    });*/\n\n\n    /* Resize Site */\n    function resizeSite() {\n        ww = $(window).width();\n        wh = $(window).height();\n        if($('body').hasClass('mobile')) {\n            headerheight = 45;\n        } else {\n            headerheight = 105;\n        }\n\n        iah = wh - headerheight - footerheight;\n        siteratio = ww / iah;\n\n        if (ww < minww) ww = minww;\n        if (wh < minwh) wh = minwh;\n\n        var iR, sf, fit;\n\n        // resize the container\n        $('#site, .scrollwrap, .site').width(ww).height(iah);\n        $('#proj_img').width(ww).height(iah);\n        $('#proj_img').css('width', ww + \"px\").css('height', iah + \"px\");\n\n        // If the window is less than 769 hide the arrows and size the images.\n        if ($('body').hasClass('mobile')) {\n            $('.arrw').hide();\n            $('#proj_img img').each(function() {\n                $(this).removeClass('slide').addClass('single_project_image');\n                //$(this).hide();\n                $(this).css('width', ww + 'px').css('height', '').css('display', '');\n            });\n            /*$('.proj.active img').each(function() {\n                $(this).css('display', 'block').show();\n            });*/\n            $('.proj_wrapper').each(function() {\n                $(this).css('width', ww + 'px').height($(window).height() - 90);\n            });\n        } else if ($('body').hasClass('large')) {\n            $('#proj_img img').each(function() {\n                $(this).removeClass('single_project_image').addClass('slide');\n            });\n        }\n\n        // resize each picture\n        $('#proj_img .slide').each(function() {\n            var thisimg = $(this);\n            iR = parseFloat(thisimg.data(\"r\"));\n            sf = thisimg.data(\"f\");\n\n            if (sf == 200) {\n                sf = 1;\n                fit = false;\n            } else {\n                sf = parseFloat(sf / 100);\n                fit = true;\n            }\n            if ($(this).hasClass(\"full\")) {\n                //thisimg = $(this);\n                containerW = ww;\n                containerH = iah;\n                containerAspect = ww / iah;\n                imageAspect = iR;\n\n                if (containerAspect < imageAspect) {\n                    var iw = iah * imageAspect;\n                    $(this)\n                        .css('width', iw)\n                        .css('height', iah)\n                        .css('top', '0')\n                        .css('left', (-(iah * imageAspect - ww) / 2));\n                } else {\n                    var ih = ww / imageAspect;\n                    $(this)\n                        .css('width', ww)\n                        .css('height', ih)\n                        .css('top', (-(ww / imageAspect - iah) / 2))\n                        .css('left', '0');\n                }\n\n            } else {\n                imgResize(thisimg, ww, iah, \"position\", 0, 0, 0, 0);\n            }\n        });\n        //end resize each picture\n\n        var currentSlide = $(\".slideshow .slide:visible\");\n        if (currentSlide.length > 0 && currentSlide.hasClass(\"video\")) {\n            if ($(\".arrw.down\").length > 0) {\n                $(\".arrw.left, .arrw.right\").height(iah / 2).width((ww / 2) - (ww / 10));\n                $(\".arrw.down\").hide();\n            } else {\n                $(\".arrw.left, .arrw.right\").height(iah / 1.5).width((ww / 2) - (ww / 10));\n            }\n        } else {\n            $(\".arrw.left, .arrw.right\").height(iah - iah / 4).width((ww / 2) - (ww / 10));\n            $(\".arrw.down\").show();\n        }\n    }\n    /* End Resize Site */\n\n    /* Resize Image */\n    function imgResize(el, cw, ch, prop, woff, hoff, loff, toff) {\n        // element, container width, height, css prop (margin/top), width offset, height offset, left offset, top offset\n        var iR, sf, fit;\n        var cR, ih, iw, imt, iml;\n\n        iR = parseFloat(el.data(\"r\"));\n        cR = (cw - woff) / (ch - hoff);\n        sf = el.data(\"f\");\n\n        if (sf == 200) {\n            sf = 1;\n            fit = false;\n        } else {\n            sf = parseFloat(sf / 100);\n            fit = true;\n        }\n\n        //element ratio\n        if (!iR) {\n            iR = el.width() / el.height();\n        }\n        //scale factor\n        if (!sf) {\n            sf = 1;\n        }\n\n        // fit inside container\n        if (fit) {\n            //cR = (cw - woff) / (ch - hoff);\n            if (cR > iR) {\n                ih = (ch - hoff) * sf;\n                iw = ih * iR;\n            } else {\n                iw = (cw - woff) * sf;\n                ih = iw / iR;\n            }\n            imt = (ch - hoff - ih) / 2;\n            iml = (cw - woff - iw) / 2;\n        }\n        else {\n            // fill container\n            //cr = (cw / ch);\n            if (ir < 1) {\n                //image is portrait\n                iw = cw;\n                ih = iw / iR;\n                if (ih < ch) {\n                    ih = ch;\n                    iw = ih * ir;\n                    iml = (cw - iw) / 2 - loff;\n                    imt = (ch - ih) / 2 - toff;\n                } else {\n                    imt = (ch - ih) / 2 - toff;\n                    iml = (cw - iw) / 2 - loff;\n                }\n            } else {\n                // image is landscape\n                ih = ch;\n                iw = ih * ir;\n\n                if (iw < cw) {\n                    iw = cw;\n                    ih = iw / ir;\n                }\n\n                iml = (cw - iw) / 2 - loff;\n                imt = (ch - ih) / 2 - toff;\n            }\n        }\n\n        if (el.hasClass('full')) {\n            if (cR > iR) {\n                iw = cw;\n                ih = iw / iR;\n                iml = 0;\n                imt = -(iw - cw) / 2;\n            } else {\n                ih = ch;\n                iw = ih * iR;\n                iml = -(ih - ch) / 2;\n                imt = 0;\n            }\n        }\n\n        if (prop == \"margin\") {\n            el.width(iw).height(ih).css({\n                marginTop: imt + \"px\",\n                marginLeft: iml + \"px\"\n            });\n        } else if (prop == \"position\") {\n            el.width(iw).height(ih).css({\n                top: imt + \"px\",\n                left: iml + \"px\"\n            });\n        } else if (prop == \"array\") {\n            var imgDim = new Array(4);\n            imgDim[0] = iw;\n            imgDim[1] = ih;\n            imgDim[2] = iml;\n            imgDim[3] = imt;\n            return imgDim;\n        }\n    }\n    /* End Resize Image */\n\n    /* Start: adjustFooterHeight */\n    function adjustFooterHeight() {\n        var ch = $(window).height() - footerheight - headerheight;\n        var fh = $('.single-footer__container').height();\n        var bfh = $('.single-below-footer__container').outerHeight();\n        if (bfh < 33) bfh = 0;\n\n        if(bfh > (ch - 150)) {\n            bfh = ch - 150;\n            $(\".single-below-footer__description\").height(bfh).css('overflow-y', 'scroll');\n            $(\".single-below-footer__container\").css('overflow-y', 'scroll');\n        }\n\n        $('.single-footer__container')\n            .stop()\n            .animate({\n                height: bfh + footerheight\n            }, {\n                duration: 200,\n                easing: 'jswing'\n            });\n        $('.single-below-footer__container')\n            .stop()\n            .animate({\n                marginTop: -(bfh)\n            }, {\n                duration: 200,\n                easing: 'jswing'\n            });\n        $(\".single-below-footer__container\").height(bfh);\n    }\n    /* End: adjustFooterHeight */\n\n    /* Get Current Page URL. If the new href state is\n     * different then go to different project */\n    function getPage(href, push) {\n        if (href[0] != \"/\") {\n            href = \"/\" + href;\n        }\n        if (currenturl[0] != \"/\") {\n            currenturl = \"/\" + currenturl;\n        }\n\n        var l = href.split(\"/\");\n        var cl = currenturl.split(\"/\");\n\n        if (href != currenturl) {\n            if (l[2] == \"project\") {\n                // send the slug only\n                goToProject(href, l[3]);\n            }\n            currenturl = href;\n        }\n    }\n    /* End Get Current Page URL */\n\n    /* Go to Project */\n    function goToProject(href, slug) {\n        var dir;\n        var thisSlideShow = $('#proj_img');\n        var thisProj = $(\".proj.active\");\n        if($('body').hasClass('large')) {\n            var current = $(\".proj.active .slide:visible\");\n        } else {\n            var current = $(\".proj.active\");\n        }\n\n        nextProj = $(\"#p_\" + slug);\n        if (nextProj.index() > thisProj.index()) {\n            if (thisProj.index() === 0 && nextProj.index() == $(\".proj\").length - 1) {\n                dir = \"u\";\n            } else {\n                dir = \"d\";\n            }\n        } else {\n            if (thisProj.index() == $(\".proj\").length - 1 && nextProj.index() === 0) {\n                dir = \"d\";\n            } else {\n                dir = \"u\";\n            }\n        }\n\n        if (nextProj.find('.proj_wrapper').first().html() === \"\") {\n            getNewProject(thisProj, current, nextProj, dir, true);\n        } else {\n            slideToProject(thisProj, current, nextProj, dir);\n        }\n\n    }\n\n    function getNewProject(thisProject, current, nextProj, dir, doSlide) {\n        var project_id = nextProj.data(\"id\");\n\n        // TODO: Add Ajax to retrieve the next project images\n        jQuery.ajax({\n            url: ajaxgetprojectimgs.ajaxurl,\n            type: 'post',\n            data: {\n                action: 'ajax_get_project_imgs',\n                project_id: project_id,\n            },\n            dataType: 'json',\n            success: function(result) {\n                jQuery.each(result, function(index, value) {\n                    nextProj.find('.proj_wrapper').first().append(value);\n                });\n                resizeSite();\n\n                if (doSlide) {\n                    slideToProject(thisProject, current, nextProj, dir);\n                }\n            }\n        });\n    }\n\n    /* Load Previous and Next Project Images */\n    function loadPrevAndNextProject(thisProj) {\n        // is the next project the next one along?\n        var nextProj, prevProj;\n\n        if (thisProj.next(\".proj\").first().length > 0) {\n            nextProj = thisProj.nextAll(\".proj\").first();\n        } else {\n            // if not then the next project is the first project\n            nextProj = $(\".proj:first-child\");\n        }\n        // If the next project is currently empty, load in the images\n        if (nextProj.find('.proj_wrapper').first().html() === \"\") {\n            getNewProject(thisProj, \"\", nextProj, \"\", false);\n        }\n\n        // is the previous project one back?\n        if (thisProj.prevAll(\".proj\").first().length > 0) {\n            prevProj = thisProj.prevAll(\".proj\").first();\n        } else {\n            // if not then the previous project is the last project\n            prevProj = $(\".proj\").eq($(\"proj\").length - 1);\n        }\n\n        // If the previous project is currently empty, load in the images\n        if (prevProj.find('.proj_wrapper').first().html() === \"\") {\n            getNewProject(thisProj, \"\", prevProj, \"\", false);\n        }\n    }\n    /* End Load Previous and Next Project Images */\n\n    function slideToProject(thisProj, current, nextProj, dir) {\n        var currentLeft, slideToShow, currentTop, directory, imgDim, table, newLeft;\n        var caption, description, imagedate;\n\n        var ww = $(window).width();\n\n        if($('body').hasClass('large')) {\n            currentLeft = current.offset().left;\n            slideToShow = nextProj.find(\".slide:first-child\");\n\n            imgDim = imgResize(slideToShow, ww, iah, \"array\", 0, 0, 0, 0);\n\n            currentTop = current.offset().top;\n\n            /* If the footer is epanded, shrink it */\n            if ($('.single-footer__container').hasClass('expanded')) {\n                $('.single-expand').click();\n            }\n\n            if (dir == \"u\") {\n                current.stop().animate({\n                    top: currentTop + wh + gutter\n                }, {\n                    duration: speed - 100,\n                    easing: easing\n                }).hide().css(\"top\", currentTop + \"px\");\n\n                slideToShow.css(\"top\", (imgDim[3] - wh - gutter) + \"px\").show(0).stop().animate({\n                    top: imgDim[3]\n                }, {\n                    duration: speed,\n                    easing: easing\n                });\n\n                newLeft = ($(\".proj.active .slide\").length - 1) * 13;\n            } else {\n                current.stop().animate({\n                    top: (currentTop - wh)\n                }, {\n                    duration: speed - 100,\n                    easing: easing\n                }).hide(0).css(\"top\", currentTop + \"px\");\n                slideToShow.css(\"top\", (ww + imgDim[3]) + \"px\").show(0).stop().animate({\n                    top: imgDim[3]\n                }, {\n                    duration: speed,\n                    easing: easing\n                });\n            }\n        } else {\n            // On mobile device so slide is left and right\n\n            slideToShow = nextProj;\n\n            /* If the footer is epanded, shrink it */\n            if ($('.single-footer__container').hasClass('expanded')) {\n                $('.single-expand').click();\n            }\n\n            if (dir == \"u\") {\n                current.stop().animate({\n                    left: ww\n                }, {\n                    duration: 50,\n                    easing: easing\n                }).hide().css(\"left\", \"0px\");\n\n                //slideToShow.css('height',$(window).height() - 90);\n                slideToShow.css(\"left\", \"-\" + ww + \"px\").show(0).stop().animate({\n                    left: 0\n                }, {\n                    duration: 300,\n                    easing: easing\n                });\n\n            } else {\n                current.stop().animate({\n                    left: -ww\n                }, {\n                    duration: 50,\n                    easing: easing\n                }).hide(0).css(\"left\", \"0px\");\n\n                //slideToShow.css('height',$(window).height() - 90);\n                slideToShow.css(\"left\", ww + \"px\").show(0).stop().animate({\n                    left: 0\n                }, {\n                    duration: 300,\n                    easing: easing\n                });\n            }\n        }\n\n        thisProj.removeClass(\"active\");\n        thisProj.find('.single-project-caption').addClass('inactive');\n        thisProj.find('.single-project-description').addClass('inactive');\n        thisProj.find('.single-project-date').addClass('inactive');\n\n        nextProj.addClass(\"active\");\n        nextProj.find('.single-project-caption').removeClass('inactive');\n        nextProj.find('.single-project-description').removeClass('inactive');\n        nextProj.find('.single-project-date').removeClass('inactive');\n\n        caption = $('#proj_img .active img').first().nextAll('.single-project-caption').first().html();\n        description = $('#proj_img .active img').first().nextAll('.single-project-description').first().html();\n        imagedate = $('#proj_img .active img').first().nextAll('.single-project-date').first().html();\n\n        $('.single-footer__caption').html(caption);\n        $('.single-footer__caption-date').html(imagedate);\n        $('.single-below-footer__description').html(description);\n\n        getPrevAndNextButtons(nextProj);\n        document.title = (nextProj.data(\"title\")) + \"- Structure Workshop\";\n        loadPrevAndNextProject(nextProj);\n    }\n\n    function getPrevAndNextButtons(thisProj) {\n        var nextProj, prevProj, table, directory, nextURL, prevURL;\n\n        table = thisProj.parent().data(\"t\");\n        if (table == \"projects\") {\n            directory = \"project\";\n        }\n\n        if (thisProj.next(\".proj\").first().length > 0) {\n            nextProj = thisProj.nextAll(\".proj\").first();\n        } else {\n            // if not then the next project is the first project\n            nextProj = $(\".proj:first-child\");\n        }\n\n        // is the previous project one back?\n        if (thisProj.prevAll(\".proj\").first().length > 0) {\n            prevProj = thisProj.prevAll(\".proj\").first();\n        } else {\n            // if not then the previous project is the last project\n            prevProj = $(\".proj\").eq($(\"proj\").length - 1);\n        }\n\n        nextURL = siteUrl + \"/\" + directory + \"/\" + nextProj.attr(\"id\").replace(\"p_\", \"\");\n        prevURL = siteUrl + \"/\" + directory + \"/\" + prevProj.attr(\"id\").replace(\"p_\", \"\");\n\n        $(\".arrw.down\").attr(\"href\", nextURL).attr(\"data-id\", nextProj.data(\"id\"));\n        $(\".arrw.up\").attr(\"href\", prevURL).attr(\"data-id\", prevProj.data(\"id\"));\n    }\n})(jQuery);\n"]}