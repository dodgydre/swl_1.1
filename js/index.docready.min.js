!function(t){function e(){var e,s,o,a,h,n;e=t(window).width(),s=t(window).height(),o=s-r-l,n=e/o,e<a&&(e=a),s<h&&(s=h),t("#site, .site").width(e).height(o),t("#proj_img").width(e).height(o),t("#proj_img").css("width",e+"px").css("height",o+"px"),t("body").hasClass("mobile")?(t(".arrw").hide(),t("#proj_img img").each(function(){t(this).removeClass("slide").addClass("project_image"),t(this).css("width","100%").css("display","block").css("height","")})):(t(".arrw").show(),t("#proj_img img").each(function(){t(this).addClass("slide").removeClass("project_image")})),t("#proj_img .slide").each(function(){var s,a,r,l;if(s=t(this),a=parseFloat(s.data("r")),r=s.data("f"),200==r?(r=1,l=!1):(r=parseFloat(r/100),l=!0),t(this).hasClass("full"))if(containerW=e,containerH=o,containerAspect=e/o,imageAspect=a,containerAspect<imageAspect){var h=o*imageAspect;t(this).css("width",h).css("height",o).css("top","0").css("left",-(h-e)/2)}else{var n=e/imageAspect;t(this).css("width",e).css("height",n).css("top",-(e/imageAspect-o)/2).css("left","0")}i(s,e,o,"position",0,0,0,0)}),t(".arrw.left, .arrw.right").not(".small").height(o).width(e/2-e/10).css("top","0"),t(".projthumb").each(function(){if(t("body").hasClass("mobile")){thisImg=t(this).find("img"),thisText=t(this).find(".projtext"),iR=thisImg.data("r");var i=(e-90-20)/3;t(this).width(i).height(i),1==iR?(thisImg.height(i).width(i).css("left","0px").css("top","0px"),thisText.css("top",i+5+"px").css("left","0px")):iR<1?(width=iR*i,imgleft=(i-width)/2,thisImg.height(i).width("auto").css("left",imgleft+"px").css("top","0px"),thisText.css("top",i+5+"px").css("left","0px")):(height=i/iR,imgtop=(i-height)/2,thisImg.height("auto").width(i).css("left","0px").css("top",imgtop+"px"),thisText.css("top",height+imgtop+5+"px")),thisText.show()}else t(this).width("").height(""),thisImg=t(this).find("img"),thisText=t(this).find(".projtext"),iR=thisImg.data("r"),1==iR?(thisImg.height(270).width(270).css("left","0px").css("top","0px"),thisText.css("top","275px").css("left","0px")):iR<1?(width=270*iR,imgleft=(270-width)/2,thisImg.height(270).width("auto").css("left",imgleft+"px").css("top","0px"),thisText.css("top","275px").css("left",imgleft+"px")):(height=270/iR,imgtop=(270-height)/2,thisImg.height("auto").width(270).css("left","0px").css("top",imgtop+"px"),thisText.css("top",height+imgtop+5+"px")),t(this).hover(function(){t(this).find(".projtext").fadeIn(100)},function(){t(this).find(".projtext").fadeOut(100)})})}function i(t,e,i,s,o,a,r,l){var h,n,c,d,m,p,g,f;if(h=parseFloat(t.data("r")),d=(e-o)/(i-a),n=t.data("f"),200==n?(n=1,c=!1):(n=parseFloat(n/100),c=!0),h||(h=t.width()/t.height()),n||(n=1),c?(d>h?(m=(i-a)*n,p=m*h):(p=(e-o)*n,m=p/h),g=(i-a-m)/2,f=(e-o-p)/2):ir<1?(p=e,m=p/h,m<i?(m=i,p=m*ir,f=(e-p)/2-r,g=(i-m)/2-l):(g=(i-m)/2-l,f=(e-p)/2-r)):(m=i,p=m*ir,p<e&&(p=e,m=p/ir),f=(e-p)/2-r,g=(i-m)/2-l),t.hasClass("full")&&(d>h?(p=e,m=p/h,f=0,g=-(p-e)/2):(m=i,p=m*h,f=-(m-i)/2,g=0)),"margin"==s)t.width(p).height(m).css({marginTop:g+"px",marginLeft:f+"px"});else if("position"==s)t.width(p).height(m).css({top:g+"px",left:f+"px"});else if("array"==s){var w=new Array(4);return w[0]=p,w[1]=m,w[2]=f,w[3]=g,w}}function s(){var e=t(window).height()-r-l,i=(t(".footer__container").height(),t(".below-footer__container")[0].scrollHeight);i<33&&(i=0),i>e-150&&(i=e-150,t(".below-footer__description").height(i).css("overflow-y","scroll"),t(".below-footer__container").css("overflow-y","scroll")),t(".footer__container").stop().animate({height:i+l},{duration:200,easing:"jswing"}),t(".below-footer__container").stop().animate({marginTop:-i},{duration:200,easing:"jswing"}),t(".below-footer__container").height(i)}var o=t(window).width(),a=t(window).height(),r=105,l=45,h=a-r-l,n=0,c="jswing",d=400,m=300,p=700;window.location.pathname;t(document).ready(function(){if(t(window).width()>769?(t("#proj_img").addClass("large").removeClass("mobile"),t("#projthumb-wrap").addClass("large").removeClass("mobile"),t("#proj_img img").addClass("slide"),t("body").addClass("large").removeClass("mobile"),t(".search").show(),t(".search-icon").show(),t(".large-menu-search").addClass("is-active")):(t("#proj_img").removeClass("large").addClass("mobile"),t("#projthumb-wrap").removeClass("large").addClass("mobile"),t("#proj_img img").removeClass("slide"),t(".arrw").hide(),t("body").addClass("mobile").removeClass("large")),t(window).resize(function(){if(t(window).width()>769){if(t(".mobile").length>0){t("#proj_img").addClass("large").removeClass("mobile"),t("#projthumb-wrap").addClass("large").removeClass("mobile"),t("body").addClass("large").removeClass("mobile"),t("#proj_img img").addClass("slide"),t(".search").show(),t(".search-icon").show(),t(".large-menu-search").addClass("is-active"),t("#proj_img img").hide(),t("#proj_img .active img").first().fadeIn(400);var i=t("#proj_img .active img").first().nextAll(".caption").first().html(),s=t("#proj_img .active img").first().nextAll(".description").first().html(),o=t("#proj_img .active img").first().nextAll(".date").first().html();t(".footer__caption").html(i),t(".footer__caption-date").html(o),t(".below-footer__description").html(s)}}else t("body").removeClass("large").addClass("mobile"),t("#proj_img").removeClass("large").addClass("mobile"),t("#projthumb-wrap").removeClass("large").addClass("mobile"),t(".large-menu-search").removeClass("is-active"),t("#proj_img img").removeClass("slide"),t(".arrw").hide(),t(".projthumb").off("hover"),t(".search").hide(),t(".search-icon").hide();e()}),t(".header__icon").click(function(e){return t("body").hasClass("home")?(e.preventDefault(),t(".header__icon").toggleClass("is-active"),t(".large-menu").toggleClass("is-active"),t(".large-menu-filter").toggleClass("is-active"),t(".large-menu_mobile").toggleClass("is-active"),t(".large-menu-search").toggleClass("is-active"),!1):void(t("body").hasClass("mobile")&&(e.preventDefault(),t(".large-menu-filter").toggleClass("is-active"),t(".large-menu_mobile").toggleClass("is-active"),t(".large-menu-search").toggleClass("is-active")))}),jQuery("#searchIcon").click(function(){"0px"==jQuery("#searchElements").css("left")?jQuery("#searchElements").stop().animate({left:-302},{duration:800,easing:"jswing"}):jQuery("#searchElements").stop().animate({left:0},{duration:800,easing:"jswing"})}),t(".expand").click(function(e){e.preventDefault(),t(".footer__container").hasClass("expanded")?(t(".footer__container").stop().animate({height:l},{duration:20,easing:"jswing"}),t(".below-footer__container").stop().animate({marginTop:0},{duration:20,easing:"jswing"}),t(".footer__container").removeClass("expanded"),t(".footer__more").text(" / Read More")):(s(),t(".footer__container").addClass("expanded"),t(".footer__more").text(" / Hide text"))}),e(),!t.browser.msie&&t(window).width()>769&&t("#proj_img").length>0){t("#proj_img img").hide(),t("#proj_img .active img").first().fadeIn(400);var h=t("#proj_img .active img").first().nextAll(".caption").first().html(),g=t("#proj_img .active img").first().nextAll(".description").first().html(),f=t("#proj_img .active img").first().nextAll(".date").first().html();t(".footer__caption").html(h),t(".footer__caption-date").html(f),t(".below-footer__description").html(g)}t("#proj_img.home .arrw").click(function(){var e,s,h,g,f,w,_,v,x,u,C,j,b;return o=t(window).width(),a=t(window).height(),cw=o,ch=a-l-r,s=t(this),s.hasClass("left")?e="l":s.hasClass("right")&&(e="r"),h=t("#proj_img"),f=t(".proj.active"),w=t(".proj.active .slide:visible"),"l"==e?f.find(".slide").length>1&&(g=w.prevAll(".proj.active .slide").first().length>0?w.prevAll(".proj.active .slide").first():t(".proj.active .slide").eq(t(".proj.active .slide").length-1),t(".footer__container").hasClass("expanded")&&t(".expand").click(),h.hasClass("fading")?(w.fadeOut(m),g.fadeIn(p)):h.hasClass("sliding")&&(_=i(g,cw,ch,"array",0,0,0,0),v=w.offset().left,x=v+cw+n,u=_[2]-cw-n,C=g.nextAll(".caption").first().html(),j=g.nextAll(".date").first().html(),b=g.nextAll(".description").first().html(),w.stop().animate({left:x},{duration:d,easing:c}).hide(0).css("left",v+"px"),g.css("left",u+"px").show(0).stop().animate({left:_[2]},d,c,function(){t(".footer__caption").html(C),t(".footer__caption-date").html(j),t(".below-footer__description").html(b)}))):"r"==e&&f.find(".slide").length>1&&(g=w.nextAll(".proj.active .slide").first().length>0?w.nextAll(".proj.active .slide").first():t(".proj.active .slide").first(),t(".footer__container").hasClass("expanded")&&t(".expand").click(),h.hasClass("fading")?(w.fadeOut(m),g.fadeIn(p)):h.hasClass("sliding")&&(_=i(g,cw,ch,"array",0,0,0,0),v=w.offset().left,x=-(cw+n),u=_[2]+cw+n,C=g.nextAll(".caption").first().html(),j=g.nextAll(".date").first().html(),b=g.nextAll(".description").first().html(),w.stop().animate({left:x},{duration:d,easing:c}).hide(0).css("left",v+"px"),g.css("left",u+"px").show(0).stop().animate({left:_[2]},d,c,function(){t(".footer__caption").html(C),t(".footer__caption-date").html(j),t(".below-footer__description").html(b)}))),!1}),t(document).keydown(function(e){37!=e.which||e.metaKey?39!=e.which||e.metaKey||(e.preventDefault(),t(".arrw.right").click()):(e.preventDefault(),t(".arrw.left").click())}),t(".arrw").swipe({swipe:function(e,i,s,o,a,r){"left"==i&&t(".arrw.right").click(),"right"==i&&t(".arrw.left").click()}}),t(".more").click(function(){"/ Read More"==t(this).html()?(t(this).html("/ Hide Text"),t(this).nextAll(".description").first().addClass("active")):(t(this).html("/ Read More"),t(this).nextAll(".description").first().removeClass("active"))}),t(window).scroll(function(){t(".description.active").each(function(){t(window).scrollTop()>t(this).nextAll("img").first().position().top?(t(this).prevAll(".more").first().click(),t(window).scrollTop(t(this).nextAll("img").first().position().top)):t(window).scrollTop()+t(window).height()<t(this).position().top&&t(this).prevAll(".more").first().click()})})})}(jQuery);