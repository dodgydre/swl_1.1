!function(e){function i(){p=e(window).width(),h=e(window).height(),c=e("body").hasClass("mobile")?45:105,f=h-c-g,m=p/f,p<w&&(p=w),h<_&&(h=_);var i,a,r;e("#site, .scrollwrap, .site").width(p).height(f),e("#proj_img").width(p).height(f),e("#proj_img").css("width",p+"px").css("height",f+"px"),e("body").hasClass("mobile")?(e(".arrw").hide(),e("#proj_img img").each(function(){e(this).removeClass("slide").addClass("single_project_image"),e(this).css("width",p+"px").css("height","").css("display","")}),e(".proj_wrapper").each(function(){e(this).css("width",p+"px").height(e(window).height()-90)})):e("body").hasClass("large")&&e("#proj_img img").each(function(){e(this).removeClass("single_project_image").addClass("slide")}),e("#proj_img .slide").each(function(){var s=e(this);if(i=parseFloat(s.data("r")),a=s.data("f"),200==a?(a=1,r=!1):(a=parseFloat(a/100),r=!0),e(this).hasClass("full"))if(containerW=p,containerH=f,containerAspect=p/f,imageAspect=i,containerAspect<imageAspect){var o=f*imageAspect;e(this).css("width",o).css("height",f).css("top","0").css("left",-(f*imageAspect-p)/2)}else{var n=p/imageAspect;e(this).css("width",p).css("height",n).css("top",-(p/imageAspect-f)/2).css("left","0")}else t(s,p,f,"position",0,0,0,0)});var s=e(".slideshow .slide:visible");s.length>0&&s.hasClass("video")?e(".arrw.down").length>0?(e(".arrw.left, .arrw.right").height(f/2).width(p/2-p/10),e(".arrw.down").hide()):e(".arrw.left, .arrw.right").height(f/1.5).width(p/2-p/10):(e(".arrw.left, .arrw.right").height(f-f/4).width(p/2-p/10),e(".arrw.down").show())}function t(e,i,t,a,r,s,o,n){var l,d,p,h,c,g,f,m;if(l=parseFloat(e.data("r")),h=(i-r)/(t-s),d=e.data("f"),200==d?(d=1,p=!1):(d=parseFloat(d/100),p=!0),l||(l=e.width()/e.height()),d||(d=1),p?(h>l?(c=(t-s)*d,g=c*l):(g=(i-r)*d,c=g/l),f=(t-s-c)/2,m=(i-r-g)/2):ir<1?(g=i,c=g/l,c<t?(c=t,g=c*ir,m=(i-g)/2-o,f=(t-c)/2-n):(f=(t-c)/2-n,m=(i-g)/2-o)):(c=t,g=c*ir,g<i&&(g=i,c=g/ir),m=(i-g)/2-o,f=(t-c)/2-n),e.hasClass("full")&&(h>l?(g=i,c=g/l,m=0,f=-(g-i)/2):(c=t,g=c*l,m=-(c-t)/2,f=0)),"margin"==a)e.width(g).height(c).css({marginTop:f+"px",marginLeft:m+"px"});else if("position"==a)e.width(g).height(c).css({top:f+"px",left:m+"px"});else if("array"==a){var w=new Array(4);return w[0]=g,w[1]=c,w[2]=m,w[3]=f,w}}function a(){var i=e(window).height()-g-c,t=(e(".single-footer__container").height(),e(".single-below-footer__container").outerHeight());t<33&&(t=0),t>i-150&&(t=i-150,e(".single-below-footer__description").height(t).css("overflow-y","scroll"),e(".single-below-footer__container").css("overflow-y","scroll")),e(".single-footer__container").stop().animate({height:t+g},{duration:200,easing:"jswing"}),e(".single-below-footer__container").stop().animate({marginTop:-t},{duration:200,easing:"jswing"}),e(".single-below-footer__container").height(t)}function r(e,i){"/"!=e[0]&&(e="/"+e),"/"!=b[0]&&(b="/"+b);var t=e.split("/");b.split("/");e!=b&&("project"==t[2]&&s(e,t[3]),b=e)}function s(i,t){var a,r=(e("#proj_img"),e(".proj.active"));if(e("body").hasClass("large"))var s=e(".proj.active .slide:visible");else var s=e(".proj.active");nextProj=e("#p_"+t),a=nextProj.index()>r.index()?0===r.index()&&nextProj.index()==e(".proj").length-1?"u":"d":r.index()==e(".proj").length-1&&0===nextProj.index()?"d":"u",""===nextProj.find(".proj_wrapper").first().html()?o(r,s,nextProj,a,!0):l(r,s,nextProj,a)}function o(e,t,a,r,s){var o=a.data("id");jQuery.ajax({url:ajaxgetprojectimgs.ajaxurl,type:"post",data:{action:"ajax_get_project_imgs",project_id:o},dataType:"json",success:function(o){jQuery.each(o,function(e,i){a.find(".proj_wrapper").first().append(i)}),i(),s&&l(e,t,a,r)}})}function n(i){var t,a;t=i.next(".proj").first().length>0?i.nextAll(".proj").first():e(".proj:first-child"),""===t.find(".proj_wrapper").first().html()&&o(i,"",t,"",!1),a=i.prevAll(".proj").first().length>0?i.prevAll(".proj").first():e(".proj").eq(e("proj").length-1),""===a.find(".proj_wrapper").first().html()&&o(i,"",a,"",!1)}function l(i,a,r,s){var o,l,p,c,g,m,w,_,x=e(window).width();e("body").hasClass("large")?(o=a.offset().left,l=r.find(".slide:first-child"),c=t(l,x,f,"array",0,0,0,0),p=a.offset().top,e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),"u"==s?(a.stop().animate({top:p+h+j},{duration:u-100,easing:v}).hide().css("top",p+"px"),l.css("top",c[3]-h-j+"px").show(0).stop().animate({top:c[3]},{duration:u,easing:v}),g=13*(e(".proj.active .slide").length-1)):(a.stop().animate({top:p-h},{duration:u-100,easing:v}).hide(0).css("top",p+"px"),l.css("top",x+c[3]+"px").show(0).stop().animate({top:c[3]},{duration:u,easing:v}))):(l=r,e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),"u"==s?(a.stop().animate({left:x},{duration:50,easing:v}).hide().css("left","0px"),l.css("left","-"+x+"px").show(0).stop().animate({left:0},{duration:300,easing:v})):(a.stop().animate({left:-x},{duration:50,easing:v}).hide(0).css("left","0px"),l.css("left",x+"px").show(0).stop().animate({left:0},{duration:300,easing:v}))),i.removeClass("active"),i.find(".single-project-caption").addClass("inactive"),i.find(".single-project-description").addClass("inactive"),i.find(".single-project-date").addClass("inactive"),r.addClass("active"),r.find(".single-project-caption").removeClass("inactive"),r.find(".single-project-description").removeClass("inactive"),r.find(".single-project-date").removeClass("inactive"),m=e("#proj_img .active img").first().nextAll(".single-project-caption").first().html(),w=e("#proj_img .active img").first().nextAll(".single-project-description").first().html(),_=e("#proj_img .active img").first().nextAll(".single-project-date").first().html(),e(".single-footer__caption").html(m),e(".single-footer__caption-date").html(_),e(".single-below-footer__description").html(w),d(r),document.title=r.data("title")+"- Structure Workshop",n(r)}function d(i){var t,a,r,s,o,n;r=i.parent().data("t"),"projects"==r&&(s="project"),t=i.next(".proj").first().length>0?i.nextAll(".proj").first():e(".proj:first-child"),a=i.prevAll(".proj").first().length>0?i.prevAll(".proj").first():e(".proj").eq(e("proj").length-1),o=siteUrl+"/"+s+"/"+t.attr("id").replace("p_",""),n=siteUrl+"/"+s+"/"+a.attr("id").replace("p_",""),e(".arrw.down").attr("href",o).attr("data-id",t.data("id")),e(".arrw.up").attr("href",n).attr("data-id",a.data("id"))}var p=e(window).width(),h=e(window).height(),c=105,g=45,f=h-c-g,m=p/f,w=0,_=0,j=0,v="jswing",u=400,x=300,C=700,b=window.location.pathname;e(document).ready(function(){e(window).width()>769?(e("body").addClass("large").removeClass("mobile"),e("#proj_img").addClass("large").removeClass("mobile"),e("#proj_img_container").addClass("large").removeClass("mobile"),e("#proj_img img").addClass("slide")):(c=45,f=h-g-c,e("body").removeClass("large").addClass("mobile"),e("#proj_img").removeClass("large").addClass("mobile"),e("#proj_img_container").removeClass("large").addClass("mobile"),e("#proj_img_container").height(f),e("#proj_img img").removeClass("slide"),e(".single-footer__more").text(" / More"),e(".arrw").hide()),i(),e(".single-expand").click(function(i){i.preventDefault(),e(".single-footer__container").hasClass("expanded")?(e(".single-footer__container").stop().animate({height:g},{duration:20,easing:"jswing"}),e(".single-below-footer__container").stop().animate({marginTop:0},{duration:20,easing:"jswing"}),e(".single-footer__container").removeClass("expanded"),e("body").hasClass("large")?e(".single-footer__more").text(" / Read More"):e(".single-footer__more").text(" / More")):(a(),e(".single-footer__container").addClass("expanded"),e("body").hasClass("large")?e(".single-footer__more").text(" / Hide Text"):e(".single-footer__more").text(" / Hide"))});var s=window.History;if(s.enabled){s.Adapter.bind(window,"statechange",function(){var e=s.getState(),i=document.createElement("a");i.href=e.url,r(i.pathname,!1)});var o=window.location.hash;o&&s.Adapter.trigger(window,"statechange")}if(!e.browser.msie)if(e("body").hasClass("large"))e("#proj_img").length>0&&(e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400));else if(e("#proj_img").length>0){var l=e("#proj_img .active img").first().nextAll(".single-project-caption").html(),m=e("#proj_img .active img").first().nextAll(".single-project-description").html(),w=e("#proj_img .active img").first().nextAll(".single-project-date").html();e(".single-footer__caption").html(l),e(".single-footer__caption-date").html(w),e(".single-below-footer__description").html(m)}e(window).resize(function(){if(e(window).width()>769){if(e(".mobile").length>0){c=105,f=e(window).height()-c-g,e("body").addClass("large").removeClass("mobile"),e("#proj_img").addClass("large").removeClass("mobile"),e("#proj_img_container").addClass("large").removeClass("mobile"),e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400);var t=e("#proj_img .active img").first().nextAll(".single-project-caption").first().html(),a=e("#proj_img .active img").first().nextAll(".single-project-description").first().html(),r=e("#proj_img .active img").first().nextAll(".single-project-date").first().html();e(".single-footer__caption").html(t),e(".single-footer__caption-date").html(r),e(".single-below-footer__description").html(a),e(".arrw").show()}}else c=45,f=e(window).height()-c-g,e("body").removeClass("large").addClass("mobile"),e("#proj_img").removeClass("large").addClass("mobile"),e("#proj_img_container").removeClass("large").addClass("mobile"),e("#proj_img_container").height(f),e(".arrw").hide();i()}),e("#proj_img.project .arrw").click(function(){var a,r,o,n,l,d,f,m,w,_;p=e(window).width(),h=e(window).height(),cw=p,ch=h-g-c,r=e(this),e(this).hasClass("left")?a="l":e(this).hasClass("right")?a="r":e(this).hasClass("up")?a="u":e(this).hasClass("down")&&(a="d"),i();var f,n,m,w,_,b,o=e("#proj_img"),l=e(".proj.active"),d=e(".proj.active .slide:visible");if("l"==a)l.find(".slide").length>1&&(n=d.prevAll(".proj.active .slide").first().length>0?d.prevAll(".proj.active .slide").first():e(".proj.active .slide").eq(e(".proj.active .slide").length-1),e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),o.hasClass("fading")?(d.fadeOut(x),n.fadeIn(C)):o.hasClass("sliding")&&(f=t(n,cw,ch,"array",0,0,0,0),m=d.offset().left,w=m+cw+j,_=f[2]-cw-j,d.stop().animate({left:w},{duration:u,easing:v}).hide(0).css("left",m+"px"),n.css("left",_+"px").show(0).stop().animate({left:f[2]},{duration:u,easing:v})),b=n.next("span").html(),e("footer .imgcap").html(b),n.hasClass("video")?(e(".arrw.left, .arrw.right").height(ch/2),e(".arrw.down").hide()):(e("arrw.left, .arrw.right").height(ch-120),e("arrw.down").show()));else if("r"==a)l.find(".slide").length>1&&(n=d.nextAll(".proj.active .slide").first().length>0?d.nextAll(".proj.active .slide").first():e(".proj.active .slide:first-child"),e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),o.hasClass("fading")?(d.fadeOut(x),n.fadeIn(C)):o.hasClass("sliding")&&(f=t(n,cw,ch,"array",0,0,0,0),m=d.offset().left,w=-(p+j),_=f[2]+p+j,d.stop().animate({left:w},{duration:u,easing:v}).hide(0).css("left",m+"px"),n.css("left",_+"px").show(0).stop().animate({left:f[2]},{duration:u,easing:v})),b=n.next("span").html(),e("#footer .imgcap").html(b),n.hasClass("video")?(e(".arrw.left, .arrw.right").height(ch/2),e(".arrw.down").hide()):(e(".arrw.left, .arrw.right").height(ch-120),e(".arrw.down").show()));else if("u"==a||"d"==a){var y=r.attr("href");s.pushState(null,null,y)}return!1}),e(document).keydown(function(i){37!=i.which||i.metaKey?38!=i.which||i.metaKey?39!=i.which||i.metaKey?40!=i.which||i.metaKey||(i.preventDefault(),e(".arrw.down").click()):(i.preventDefault(),e(".arrw.right").click()):(i.preventDefault(),e(".arrw.up").click()):(i.preventDefault(),e(".arrw.left").click())}),e("body").hasClass("large")?e(".arrw").swipe({swipe:function(i,t,a,r,s,o){"left"==t&&e(".arrw.right").click(),"right"==t&&e(".arrw.left").click(),"down"==t&&e(".arrw.up").click(),"up"==t&&e(".arrw.down").click()}}):e(".proj").on("swiperight",function(i){i.preventDefault();var t=e(".arrw.up").attr("href");s.pushState(null,null,t)}).on("swipeleft",function(i){i.preventDefault();var t=e(".arrw.down").attr("href");s.pushState(null,null,t)}),d(e(".proj.active")),n(e(".proj.active"))})}(jQuery);