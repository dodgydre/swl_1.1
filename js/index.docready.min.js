!function(t){function e(t,e,i,s,o,a,r,l){var n,h,c,d,p,f,g,m,w=new Array(4);if(n=parseFloat(t.data("r")),d=(e-o)/(i-a),h=t.data("f"),200===h?(h=1,c=!1):(h=parseFloat(h/100),c=!0),n||(n=t.width()/t.height()),h||(h=1),c?(d>n?(p=(i-a)*h,f=p*n):(f=(e-o)*h,p=f/n),g=(i-a-p)/2,m=(e-o-f)/2):n<1?(f=e,p=f/n,p<i?(p=i,f=p*n,m=(e-f)/2-r,g=(i-p)/2-l):(g=(i-p)/2-l,m=(e-f)/2-r)):(p=i,f=p*n,f<e&&(f=e,p=f/n),m=(e-f)/2-r,g=(i-p)/2-l),t.hasClass("full")&&(d>n?(f=e,p=f/n,m=0,g=-((p-i)/2)):(p=i,f=p*n,m=-((f-e)/2),g=0)),"margin"===s)t.width(f).height(p).css({marginTop:g+"px",marginLeft:m+"px"});else if("position"===s)t.width(f).height(p).css({top:g+"px",left:m+"px"});else if("array"===s)return w[0]=f,w[1]=p,w[2]=m,w[3]=g,w}function i(){var i,s,o,a,r,l,n,h,p,f,g,m,w,_,u,x;i=t(window).width(),s=t(window).height(),o=s-c-d,l=i/o,i<a&&(i=a),s<r&&(s=r),t("#site, .site").width(i).height(o),t("#proj_img").width(i).height(o),t("#proj_img").css("width",i+"px").css("height",o+"px"),t("body").hasClass("mobile")?(t(".arrw").hide(),t("#proj_img img").each(function(){t(this).removeClass("slide").addClass("project_image"),t(this).css("width","100%").css("display","block").css("height","")})):(t(".arrw").show(),t("#proj_img img").each(function(){t(this).addClass("slide").removeClass("project_image")})),t("#proj_img .slide").each(function(){p=t(this),n=parseFloat(p.data("r")),u=p.data("f"),200===u?(u=1,x=!1):(u=parseFloat(u/100),x=!0),e(p,i,o,"position",0,0,0,0)}),t(".arrw.left, .arrw.right").not(".small").height(o).width(i/2).css("top","0"),t(".projthumb").each(function(){t("body").hasClass("mobile")?(p=t(this).find("img"),f=t(this).find(".projtext"),n=p.data("r"),h=(i-90-20)/3,t(this).width(h).height(h),1===n?(p.height(h).width(h).css("left","0px").css("top","0px"),f.css("top",h+5+"px").css("left","0px")):n<1?(g=n*h,w=(h-g)/2,p.height(h).width("auto").css("left",w+"px").css("top","0px"),f.css("top",h+5+"px").css("left","0px")):(m=h/n,_=(h-m)/2,p.height("auto").width(h).css("left","0px").css("top",_+"px"),f.css("top",m+_+5+"px")),f.show()):(t(this).width("").height(""),p=t(this).find("img"),f=t(this).find(".projtext"),n=p.data("r"),1===n?(p.height(270).width(270).css("left","0px").css("top","0px"),f.css("top","275px").css("left","0px")):n<1?(g=270*n,w=(270-g)/2,p.height(270).width("auto").css("left",w+"px").css("top","0px"),f.css("top","275px").css("left",w+"px")):(m=270/n,_=(270-m)/2,p.height("auto").width(270).css("left","0px").css("top",_+"px"),f.css("top",m+_+5+"px")),t(this).hover(function(){t(this).find(".projtext").fadeIn(100)},function(){t(this).find(".projtext").fadeOut(100)}))})}function s(){var e=t(window).height()-c-d,i=(t(".footer__container").height(),t(".below-footer__container")[0].scrollHeight);i<33&&(i=0),i>e-150&&(i=e-150,t(".below-footer__description").height(i).css("overflow-y","scroll"),t(".below-footer__container").css("overflow-y","scroll")),t(".footer__container").stop().animate({height:i+d},{duration:200,easing:"jswing"}),t(".below-footer__container").stop().animate({marginTop:-i},{duration:200,easing:"jswing"}),t(".below-footer__container").height(i)}function o(){t("#proj_img").addClass("large").removeClass("mobile"),t("#projthumb-wrap").addClass("large").removeClass("mobile"),t("#proj_img img").addClass("slide"),t("body").addClass("large").removeClass("mobile"),t(".search").show(),t(".search-icon").show(),t(".large-menu-search").addClass("is-active")}function a(){t("#proj_img").removeClass("large").addClass("mobile"),t("#projthumb-wrap").removeClass("large").addClass("mobile"),t("#proj_img img").removeClass("slide"),t(".arrw").hide(),t("body").addClass("mobile").removeClass("large"),t("body").hasClass("post-type-archive-project")&&(t(".large-menu-search").removeClass("is-active"),t(".large-menu_mobile").removeClass("is-active"),t(".search").hide(),t(".search-icon").hide()),t(".projthumb").off("hover")}function r(){var e,i,s;e=t("#proj_img .active img").first().nextAll(".caption").first().html(),i=t("#proj_img .active img").first().nextAll(".description").first().html(),s=t("#proj_img .active img").first().nextAll(".date").first().html(),t(".footer__caption").html(e),t(".footer__caption-date").html(s),t(".below-footer__description").html(i)}function l(){t(".footer__container").hasClass("expanded")?(t(".footer__container").stop().animate({height:d},{duration:20,easing:"jswing"}),t(".below-footer__container").stop().animate({marginTop:0},{duration:20,easing:"jswing"}),t(".footer__container").removeClass("expanded"),t(".footer__more").text(" / Read text")):(s(),t(".footer__container").addClass("expanded"),t(".footer__more").text(" / Hide text"))}var n=t(window).width(),h=t(window).height(),c=105,d=45,p=h-c-d,f=0,g="jswing",m=400,w=300,_=700;window.location.pathname;t(document).ready(function(){t(window).width()>769?o():a(),t(window).resize(function(){setTimeout(function(){t(window).width()>769?t(".mobile").length>0&&(o(),r(),t("#proj_img img").hide(),t("#proj_img .active img").first().fadeIn(400)):a(),i()},100)}),t(".header__icon").click(function(e){return t("body").hasClass("home")?(e.preventDefault(),t(".header__icon").toggleClass("is-active"),t(".large-menu").toggleClass("is-active"),t(".large-menu-filter").toggleClass("is-active"),t(".large-menu_mobile").toggleClass("is-active"),t(".large-menu-search").toggleClass("is-active"),t(".sub_logo-large-image").toggleClass("is-hidden"),!1):void t("body").hasClass("mobile")}),t("#searchIcon").click(function(){"0px"===t("#searchElements").css("left")?t("#searchElements").stop().animate({left:-302},{duration:800,easing:"jswing"}):t("#searchElements").stop().animate({left:0},{duration:800,easing:"jswing"})}),t(".expand").click(function(t){t.preventDefault(),l()}),i(),!t.browser.msie&&t(window).width()>769&&t("#proj_img").length>0&&(t("#proj_img img").hide(),t("#proj_img .active img").first().fadeIn(400),r()),t("#proj_img.home .arrw").click(function(){var i,s,o,a,r,l,n,h,p,u,x,v,j,C,b,y,A;return C=t(window).width(),b=t(window).height(),y=C,A=b-d-c,s=t(this),s.hasClass("left")?i="l":s.hasClass("right")&&(i="r"),o=t("#proj_img"),r=t(".proj.active"),l=t(".proj.active .slide:visible"),"l"===i?r.find(".slide").length>1&&(a=l.prevAll(".proj.active .slide").first().length>0?l.prevAll(".proj.active .slide").first():t(".proj.active .slide").eq(t(".proj.active .slide").length-1),t(".footer__container").hasClass("expanded")&&t(".expand").click(),o.hasClass("fading")?(l.fadeOut(w),a.fadeIn(_)):o.hasClass("sliding")&&(n=e(a,y,A,"array",0,0,0,0),h=l.offset().left,p=h+y+f,u=n[2]-y-f,x=a.nextAll(".caption").first().html(),v=a.nextAll(".date").first().html(),j=a.nextAll(".description").first().html(),l.stop().animate({left:p},{duration:m,easing:g}).hide(0).css("left",h+"px"),a.css("left",u+"px").show(0).stop().animate({left:n[2]},m,g,function(){t(".footer__caption").html(x),t(".footer__caption-date").html(v),t(".below-footer__description").html(j)}))):"r"===i&&r.find(".slide").length>1&&(a=l.nextAll(".proj.active .slide").first().length>0?l.nextAll(".proj.active .slide").first():t(".proj.active .slide").first(),t(".footer__container").hasClass("expanded")&&t(".expand").click(),o.hasClass("fading")?(l.fadeOut(w),a.fadeIn(_)):o.hasClass("sliding")&&(n=e(a,y,A,"array",0,0,0,0),h=l.offset().left,p=-(y+f),u=n[2]+y+f,x=a.nextAll(".caption").first().html(),v=a.nextAll(".date").first().html(),j=a.nextAll(".description").first().html(),l.stop().animate({left:p},{duration:m,easing:g}).hide(0).css("left",h+"px"),a.css("left",u+"px").show(0).stop().animate({left:n[2]},m,g,function(){t(".footer__caption").html(x),t(".footer__caption-date").html(v),t(".below-footer__description").html(j)}))),!1}),t(document).keydown(function(e){37!==e.which||e.metaKey?39!==e.which||e.metaKey||(e.preventDefault(),t(".arrw.right").click()):(e.preventDefault(),t(".arrw.left").click())}),t(".arrw").swipe({swipe:function(e,i,s,o,a,r){"left"===i&&t(".arrw.right").click(),"right"===i&&t(".arrw.left").click()}}),t(".more").click(function(){"/ Read text"===t(this).html()?(t(this).html("/ Hide text"),t(this).nextAll(".description").first().addClass("active")):(t(this).html("/ Read text"),t(this).nextAll(".description").first().removeClass("active"))}),t(window).scroll(function(){t(".description.active").each(function(){t(window).scrollTop()>t(this).nextAll("img").first().position().top?(t(this).prevAll(".more").first().click(),t(window).scrollTop(t(this).nextAll("img").first().position().top)):t(window).scrollTop()+t(window).height()<t(this).position().top&&t(this).prevAll(".more").first().click()})})})}(jQuery);